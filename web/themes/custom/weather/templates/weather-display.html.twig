{#
/**
 * @file
 * Template moderno para mostrar datos del clima
 *
 * Available variables:
 * - weather_data: Array con datos del clima
 * - config: ConfiguraciÃ³n (units, language)
 * - weather_icon_url: URL del icono del clima
 * - temperature_formatted: Temperatura formateada con unidad
 * - feels_like_formatted: SensaciÃ³n tÃ©rmica formateada
 * - wind_speed_formatted: Velocidad del viento formateada
 * - weather_time_formatted: Fecha formateada
 * - weather_classes: Array de clases CSS
 */
#}

<div{{ attributes.addClass(weather_classes, 'weather-widget-modern') }}>
  {% if weather_data %}
    
    {# Header con sensaciÃ³n tÃ©rmica y temperatura principal #}
    <div class="weather-header">
    <h2 class="weather-location">
      {{ weather_data.city }}{% if weather_data.country %}, {{ weather_data.country }}{% endif %}
    </h2>
    {% if weather_icon_url %}
        <img src="{{ weather_icon_url }}" alt="{{ weather_data.condition }}" class="weather-icon" />
      {% endif %}
      <div class="feels-like-section">
        <div class="main-temperature">
          {{ temperature_formatted|replace({'Â°': 'Â°'}) }}
        </div>
      </div>
    </div>

    {# Grid de mÃ©tricas principales #}
    <div class="weather-metrics-grid">
      
      {# Fila 1 #}
      <div class="metric-item">
        <div class="metric-icon">ğŸŒ¡ï¸</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'MÃ¡x./MÃ­n.'|t }}</span>
          <span class="metric-value">
            {{ weather_data.temp_max|default('83') }}Â°/{{ weather_data.temp_min|default('64') }}Â°
          </span>
        </div>
      </div>

      <div class="metric-item">
        <div class="metric-icon">ğŸ’¨</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Viento'|t }}</span>
          <span class="metric-value">{{ weather_data.wind_speed|default('8') }} mph</span>
        </div>
      </div>

      {# Fila 2 #}
      <div class="metric-item">
        <div class="metric-icon">ğŸ’§</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Humedad'|t }}</span>
          <span class="metric-value">{{ weather_data.humidity|default('52') }}%</span>
        </div>
      </div>

      <div class="metric-item">
        <div class="metric-icon">ğŸŒ¡ï¸</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Punto de rocÃ­o'|t }}</span>
          <span class="metric-value">{{ weather_data.dew_point|default('56') }}Â°</span>
        </div>
      </div>

      {# Fila 3 #}
      <div class="metric-item">
        <div class="metric-icon">ğŸ“Š</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'PresiÃ³n'|t }}</span>
          <span class="metric-value">
            <span class="trend-up">â†—</span> {{ weather_data.pressure|default('29.90') }} in
          </span>
        </div>
      </div>

      <div class="metric-item">
        <div class="metric-icon">â˜€ï¸</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Ãndice UV'|t }}</span>
          <span class="metric-value">{{ weather_data.uv_index|default('3') }} {{ 'de'|t }} 11</span>
        </div>
      </div>

      {# Fila 4 #}
      <div class="metric-item">
        <div class="metric-icon">ğŸ‘ï¸</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Visibilidad'|t }}</span>
          <span class="metric-value">{{ weather_data.visibility|default('7') }} mi</span>
        </div>
      </div>

      <div class="metric-item">
        <div class="metric-icon">ğŸŒ™</div>
        <div class="metric-content">
          <span class="metric-label">{{ 'Fase lunar'|t }}</span>
          <span class="metric-value">{{ weather_data.moon_phase|default('Gibosa menguante'|t) }}</span>
        </div>
      </div>

    </div>

  {% else %}
    <div class="weather-error">
      <p>{{ 'No se pudieron obtener los datos del clima.'|t }}</p>
    </div>
  {% endif %}
</div>